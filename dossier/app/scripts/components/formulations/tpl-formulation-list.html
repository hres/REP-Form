<ng-form name="formulationsForm">
    <input type="textbox" required="true" ng-show="false" name="noFormulation" id="noFormulation{{$id}}"
           data-ng-model="formulCtrl.noFormulations"/>
    <label for="noFormulation{{$id}}" ng-if="formulationsForm.noFormulation.$invalid">
        <strong id="active-error" class="error" >
        <span class="label label-danger" ng-messages="formulationsForm.noFormulation.$error">
            <span ng-message="required"><span translate="MSG_ERR_ONE_FORMULATION"></span></span>
        </span>
        </strong>
    </label>
    <!--<pre>formulationList: {{formulCtrl.formulationList|json}}</pre>-->
    <cmp-expanding-table title="Formulations List" reset-to-collapsed="formulCtrl.resetToCollapsed" list-items="formulCtrl.formulationList"
                         column-def="formulCtrl.colNames" select-record="formulCtrl.selectRecord"
                         disable-selection="!formulCtrl.isDetailValid">

        <cmp-formulation-record record="$parent.record" on-update="formulCtrl.update($parent.$index,record)" on-delete="formulCtrl.delete($parent.$index)" add-copy="formulCtrl.addCopy(record)"  delete-btn="true" record-changed="formulCtrl.recordChanged()"></cmp-formulation-record>

    </cmp-expanding-table>

    <!--<cmp-formulation-record ng-if="formulCtrl.newFormShown === true" on-add-new="formulCtrl.addNew(record)" on-cancel="formulCtrl.newFormShown = false" delete-btn="false"></cmp-formulation-record>-->

    <div class="mrgn-tp-md mrgn-bttm-lg">
        <div class="btn-group-sm col-md-12 text-right">
            <button  name="addFormulation" id="addFormulation" class="btn btn-primary"
                    ng-click="formulCtrl.addNew()">{{'ADD_FORMULATION'|translate}}</button>
        </div>
    </div>
    
</ng-form>