import{$ as ee,$a as L,A as i,Aa as me,B as g,Ca as ce,D as z,Da as y,Ea as he,G as a,Ga as ue,H as n,Ha as fe,I as o,Ia as F,J as G,Ja as X,Ka as x,La as ve,M as W,Ma as _e,N as h,O as S,Oa as b,P as f,Q as v,R as _,Ra as Ie,S as p,Sa as w,T as c,Ta as Ee,U as u,Va as J,X as Z,Y as $,Z as l,Za as ge,_ as d,_a as Ce,ab as Se,bb as T,cb as O,db as B,eb as N,fb as M,ga as ie,gb as V,ha as te,hb as U,ia as re,ib as A,jb as k,k as K,kb as D,lb as ye,n as j,o as q,ra as ne,sa as oe,ta as ae,ua as se,va as pe,wa as le,x as I,xa as de,y as Y}from"./chunk-6PFZY45H.js";function Be(E,Fe){if(E&1){let t=W();n(0,"div")(1,"section",2)(2,"header",3)(3,"h2",4),p(4),l(5,"translate"),o()(),n(6,"div",8)(7,"app-health-canada-only",15),h("errorList",function(e){j(t);let r=S();return q(r.processHealthCanadaOnlyErrors(e))}),o()()()()}if(E&2){let t=S();i(4),c(d(5,2,"panel.title.hc.only")),i(3),a("showErrors",t.showErrors)}}function Ne(E,Fe){if(E&1){let t=W();n(0,"div")(1,"section",2)(2,"header",3)(3,"h2",4),p(4),l(5,"translate"),n(6,"sup",5)(7,"a",6)(8,"span",7),p(9),l(10,"translate"),o(),p(11),o()()()(),n(12,"div",8)(13,"app-notice-of-compliance",15),h("errorList",function(e){j(t);let r=S();return q(r.processNoticeOfComplianceErrors(e))}),o()()()()}if(E&2){let t=S();i(4),u("",d(5,6,"panel.title.noticeofcompliance")," "),i(2),a("id",t.helpIndex.nocDateIndx[2]),i(),a("href","#"+t.helpIndex.nocDateIndx[1],I),i(2),c(d(10,8,"instruction")),i(2),c(t.helpIndex.nocDateIndx[0]),i(2),a("showErrors",t.showErrors)}}var vi=(()=>{class E{constructor(t,s,e,r,m,R,P,Q,H){this._fb=t,this.cdr=s,this._baseService=e,this._globalService=r,this._utilsService=m,this.fileServices=R,this._versionService=P,this._checkSumService=Q,this.datepipe=H,this._patentInformationErrors=[],this._drugUseErrors=[],this._noticeOfComplianceErrors=[],this._newDrugSubmissionInfoErrors=[],this._medicinalIngredientsForErrors=[],this._timingOfApplicantForErrors=[],this._feesForErrors=[],this._certificationForErrors=[],this._applicantForErrors=[],this._healthCanadaOnlyErrors=[],this.errorList=[],this.headingLevel="h2",this.rootTagText=w,this.versionTagPath=Ee,this.startCheckSumVersionNum=5,this.showErrors=!1}ngOnInit(){this.rtForm||(this.rtForm=this._baseService.getReactiveModel(this._fb));try{this._globalService.enrollment?this.enrollModel=this._globalService.enrollment:(this.enrollModel=this._baseService.getEmptyEnrol(),this._globalService.enrollment=this.enrollModel),this.transactionEnrollModel=this.enrollModel[this.rootTagText],this._initModels(this.transactionEnrollModel),this.lang=this._globalService.currLanguage,this.helpIndex=this._globalService.helpIndex,this.devEnv=this._globalService.devEnv,this.byPassCheckSum=this._globalService.byPassChecksum,this.isInternal=Ie.isInternal}catch(t){console.error(t)}}ngAfterViewInit(){document.location.href="#def-top",this.msgList.changes.subscribe(t=>{let s=[];this._updateErrorList(t),this.processErrors()}),this.msgList.notifyOnChanges()}_updateErrorList(t){}processErrors(){this.errorList=[],this.errorList=this.errorList.concat(this._patentInformationErrors),this.errorList=this.errorList.concat(this._drugUseErrors),this.errorList=this.errorList.concat(this._noticeOfComplianceErrors),this.errorList=this.errorList.concat(this._newDrugSubmissionInfoErrors),this.errorList=this.errorList.concat(this._medicinalIngredientsForErrors),this.errorList=this.errorList.concat(this._feesForErrors),this.errorList=this.errorList.concat(this._timingOfApplicantForErrors),this.errorList=this.errorList.concat(this._healthCanadaOnlyErrors),this.errorList=this.errorList.concat(this._certificationForErrors),this.cdr.detectChanges()}processHealthCanadaOnlyErrors(t){this._healthCanadaOnlyErrors=t,this.processErrors()}processPatentInfoErrors(t){this._patentInformationErrors=t,this.processErrors()}processDrugUseErrors(t){this._drugUseErrors=t,this.processErrors()}processNoticeOfComplianceErrors(t){this._noticeOfComplianceErrors=t,this.processErrors()}processNewDrugSubmissionInfoErrors(t){this._newDrugSubmissionInfoErrors=t,this.processErrors()}processMedicinalIngredientsErrors(t){this._medicinalIngredientsForErrors=t,this.processErrors()}processFeesErrors(t){this._feesForErrors=t,this.processErrors()}processTimingOfApplicantErrors(t){this._timingOfApplicantForErrors=t,this.processErrors()}processCertificationErrors(t){this._certificationForErrors=t,this.processErrors()}processApplicantErrors(t){this._applicantForErrors=t,this.processErrors()}hideErrorSummary(){return this.showErrors&&this.errorList&&this.errorList.length>0}saveXmlFile(){this.showErrors=!0,this.processErrors(),this._saveXML()}saveWorkingCopyFile(){let t=this._prepareForSaving(!1),s=this._generateFileName(t[w]);this.fileServices.saveJsonToFile(t,s,null),this.saveWorkCopyTime=Date.now()}processFile(t){t.data!==null&&(this.transactionEnrollModel=t.data.TRANSACTION_ENROL,this._initModels(this.transactionEnrollModel))}_initModels(t){this.ectdModel=t.ectd,t.fee_details!=null&&(this.transFeeModel=t.fee_details),this.addressModel=t.applicant.address,this.contactModel=t.applicant.contact}preload(){}unloadNotification(t){t.returnValue=!0}_saveXML(){if(this.errorList&&this.errorList.length<1){let t=this._prepareForSaving(!0),s=this._generateFileName(t[w]),e=this._versionService.getApplicationMajorVersionWithUnderscore(this._globalService.appVersion),r=J.toUpperCase()+"_RT_"+e+".xsl";this.fileServices.saveXmlToFile(t,s,!0,r);return}document.location.href="#topErrorSummaryId"}_prepareForSaving(t){let s=this._baseService.getEmptyTransactionEnrol(),e=this.patentComponent.getFormValue();this._baseService.mapPatentFormsToOutput(s,e);let r=this.drugUseComponent.getFormValue();this._baseService.mapDrugUseFormsToOutput(s,r);let m=this.noticeOfComplianceComponent.getFormValue();this._baseService.mapNOCFormsToOutput(s,m);let R=this.newDrugSubmissionInformationComponent.getFormValue();this._baseService.mapNewDrugSubmissionInformationFormsToOutput(s,R);let P=this.feesComponent.getFormValue();this._baseService.mapFeesFormsToOutput(s,P);let Q=this.medicinalIngredientsComponent.getFormValue();this._baseService.mapMedicinalIngredientsFormsToOutput(s,Q);let H=this.timeOfApplicationComponent.getFormValue();this._baseService.mapTimingOfApplicantFormsToOutput(s,H);let xe=this.healthCanadaComponent.getFormValue();this._baseService.mapHealthCanadaOnlyFormsToOutput(s,xe);let be=this.certificationComponent.getFormValue();this._baseService.mapCertificationFormsToOutput(s,be);let we=this.applicantComponent.getFormValue(),Le=this.applicantComponent.getAddressFormValue(),Te=this.applicantComponent.getContactFormValue();this._baseService.mapApplicantInfoToOutput(s,we,Le,Te),s.date_saved=this._utilsService.getFormattedDate("yyyy-MM-dd-hhmm"),s.software_version=this._globalService.appVersion,s.form_language=this._globalService.currLanguage;let C={TRANSACTION_ENROL:s};return t&&(C.TRANSACTION_ENROL[X]="",C.TRANSACTION_ENROL[X]=this._checkSumService.createHash(C)),console.log("_prepareForSaving ~ output",JSON.stringify(C,null,2)),C}_generateFileName(t){return J+"-"+t.date_saved}onChanged(t,s){t?.target?.checked===!1&&this.rtForm.controls[s].reset()}static{this.\u0275fac=function(s){return new(s||E)(g(le),g(ee),g(L),g(Ce),g(y),g(F),g(b),g(x),g(te))}}static{this.\u0275cmp=K({type:E,selectors:[["app-form-base"]],viewQuery:function(s,e){if(s&1&&(f(T,5),f(O,5),f(B,5),f(N,5),f(M,5),f(k,5),f(V,5),f(A,5),f(D,5),f(U,5),f(me,5)),s&2){let r;v(r=_())&&(e.patentComponent=r.first),v(r=_())&&(e.drugUseComponent=r.first),v(r=_())&&(e.noticeOfComplianceComponent=r.first),v(r=_())&&(e.newDrugSubmissionInformationComponent=r.first),v(r=_())&&(e.medicinalIngredientsComponent=r.first),v(r=_())&&(e.timeOfApplicationComponent=r.first),v(r=_())&&(e.feesComponent=r.first),v(r=_())&&(e.applicantComponent=r.first),v(r=_())&&(e.healthCanadaComponent=r.first),v(r=_())&&(e.certificationComponent=r.first),v(r=_())&&(e.msgList=r)}},hostBindings:function(s,e){s&1&&h("beforeunload",function(m){return e.unloadNotification(m)},!1,Y)},standalone:!0,features:[Z([F,y,b,x,fe,ue,L,ge]),$],decls:149,vars:112,consts:[[1,"container-fluid","wb-frmvld","wb-init","wb-frmvld-inited"],["name","transactionForm","novalidate","",3,"formGroup"],[1,"panel","panel-primary","mrgn-tp-lg"],[1,"panel-heading","clearfix"],[1,"panel-title"],[3,"id"],[1,"fn-lnk","mrgn-tp-md",3,"href"],[1,"wb-inv"],[1,"panel-body"],[3,"complete","rootTag","lang","versionTagPath","startCheckSumVersion","byPassCheckSum","devEnv"],["id","topErrorSummaryId"],["headingPreamble","errorSummary.cspfile",3,"hiddenSummary","errorList","headingLevel"],[4,"ngIf"],[3,"saveWorkCopyTime"],[3,"errorList","showErrors","addressModel","contactModel"],[3,"errorList","showErrors"],[3,"errorList","showErrors","dataModel"],[1,"row","btn-group-sm"],[1,"form-group","col-md-4"],["type","button",1,"btn","btn-default","btn-lg","active",3,"click"],["type","button",1,"btn","btn-primary","btn-lg","active",3,"click"]],template:function(s,e){s&1&&(n(0,"div",0)(1,"form",1)(2,"div")(3,"section",2)(4,"header",3)(5,"h2",4),p(6),l(7,"translate"),n(8,"sup",5)(9,"a",6)(10,"span",7),p(11),l(12,"translate"),o(),p(13),o()()()(),n(14,"div",8)(15,"lib-file-reader",9),h("complete",function(m){return e.processFile(m)}),o()()()(),n(16,"div",10),G(17,"lib-error-summary",11),o(),z(18,Be,8,4,"div",12),n(19,"div")(20,"section",2)(21,"header",3)(22,"h2",4),p(23),l(24,"translate"),n(25,"sup",5)(26,"a",6)(27,"span",7),p(28),l(29,"translate"),o(),p(30),o()()()(),n(31,"div",8),G(32,"app-cert-supp-protect",13),o()()(),n(33,"div")(34,"section",2)(35,"header",3)(36,"h2",4),p(37),l(38,"translate"),n(39,"sup",5)(40,"a",6)(41,"span",7),p(42),l(43,"translate"),o(),p(44),o()()()(),n(45,"div",8)(46,"app-applicant",14),h("errorList",function(m){return e.processPatentInfoErrors(m)}),o()()()(),n(47,"div")(48,"section",2)(49,"header",3)(50,"h2",4),p(51),l(52,"translate"),n(53,"sup",5)(54,"a",6)(55,"span",7),p(56),l(57,"translate"),o(),p(58),o()()()(),n(59,"div",8)(60,"app-patent",15),h("errorList",function(m){return e.processPatentInfoErrors(m)}),o()()()(),n(61,"div")(62,"section",2)(63,"header",3)(64,"h2",4),p(65),l(66,"translate"),n(67,"sup",5)(68,"a",6)(69,"span",7),p(70),l(71,"translate"),o(),p(72),o()()()(),n(73,"div",8)(74,"app-new-drug-submission-information",15),h("errorList",function(m){return e.processNewDrugSubmissionInfoErrors(m)}),o()()()(),z(75,Ne,14,10,"div",12),n(76,"div")(77,"section",2)(78,"header",3)(79,"h2",4),p(80),l(81,"translate"),n(82,"sup",5)(83,"a",6)(84,"span",7),p(85),l(86,"translate"),o(),p(87),o()()()(),n(88,"div",8)(89,"app-drug-use",15),h("errorList",function(m){return e.processDrugUseErrors(m)}),o()()()(),n(90,"div")(91,"section",2)(92,"header",3)(93,"h2",4),p(94),l(95,"translate"),o()(),n(96,"div",8)(97,"app-time-of-application",16),h("errorList",function(m){return e.processTimingOfApplicantErrors(m)}),o()()()(),n(98,"div")(99,"section",2)(100,"header",3)(101,"h2",4),p(102),l(103,"translate"),n(104,"sup",5)(105,"a",6)(106,"span",7),p(107),l(108,"translate"),o(),p(109),o()()()(),n(110,"div",8)(111,"app-medicinal-ingredients",15),h("errorList",function(m){return e.processMedicinalIngredientsErrors(m)}),o()()()(),n(112,"div")(113,"section",2)(114,"header",3)(115,"h2",4),p(116),l(117,"translate"),n(118,"sup",5)(119,"a",6)(120,"span",7),p(121),l(122,"translate"),o(),p(123),o()()()(),n(124,"div",8)(125,"app-fees",15),h("errorList",function(m){return e.processFeesErrors(m)}),o()()()(),n(126,"div")(127,"section",2)(128,"header",3)(129,"h2",4),p(130),l(131,"translate"),n(132,"sup",5)(133,"a",6)(134,"span",7),p(135),l(136,"translate"),o(),p(137),o()()()(),n(138,"div",8)(139,"app-certification",15),h("errorList",function(m){return e.processCertificationErrors(m)}),o()()()(),n(140,"div",17)(141,"div",18)(142,"button",19),h("click",function(){return e.saveWorkingCopyFile()}),p(143),l(144,"translate"),o()(),n(145,"div",18)(146,"button",20),h("click",function(){return e.saveXmlFile()}),p(147),l(148,"translate"),o()()()()()),s&2&&(i(),a("formGroup",e.rtForm),i(5),u("",d(7,70,"load.file")," "),i(2),a("id",e.helpIndex.loadFileIndx[2]),i(),a("href","#"+e.helpIndex.loadFileIndx[1],I),i(2),c(d(12,72,"instruction")),i(2),c(e.helpIndex.loadFileIndx[0]),i(2),a("rootTag",e.rootTagText)("lang",e.lang)("versionTagPath",e.versionTagPath)("startCheckSumVersion",e.startCheckSumVersionNum)("byPassCheckSum",e.byPassCheckSum)("devEnv",e.devEnv),i(2),a("hiddenSummary",e.hideErrorSummary())("errorList",e.errorList)("headingLevel",e.headingLevel),i(),a("ngIf",e.isInternal),i(5),u("",d(24,74,"panel.title.csp")," "),i(2),a("id",e.helpIndex.dateLastIndx[2]),i(),a("href","#"+e.helpIndex.dateLastIndx[1],I),i(2),c(d(29,76,"instruction")),i(2),c(e.helpIndex.dateLastIndx[0]),i(2),a("saveWorkCopyTime",e.saveWorkCopyTime),i(5),u("",d(38,78,"panel.title.applicant")," "),i(2),a("id",e.helpIndex.appContactIndx[2]),i(),a("href","#"+e.helpIndex.appContactIndx[1],I),i(2),c(d(43,80,"instruction")),i(2),c(e.helpIndex.appContactIndx[0]),i(2),a("showErrors",e.showErrors),i(5),u("",d(52,82,"panel.title.patent")," "),i(2),a("id",e.helpIndex.patentInfoIndx[2]),i(),a("href","#"+e.helpIndex.patentInfoIndx[1],I),i(2),c(d(57,84,"instruction")),i(2),c(e.helpIndex.patentInfoIndx[0]),i(2),a("showErrors",e.showErrors),i(5),u("",d(66,86,"panel.title.new.drug.submission.info")," "),i(2),a("id",e.helpIndex.newDrugIndx[2]),i(),a("href","#"+e.helpIndex.newDrugIndx[1],I),i(2),c(d(71,88,"instruction")),i(2),c(e.helpIndex.newDrugIndx[0]),i(2),a("showErrors",e.showErrors),i(),a("ngIf",e.isInternal),i(5),u("",d(81,90,"panel.title.druguse")," "),i(2),a("id",e.helpIndex.drugUseIndx[2]),i(),a("href","#"+e.helpIndex.drugUseIndx[1],I),i(2),c(d(86,92,"instruction")),i(2),c(e.helpIndex.drugUseIndx[0]),i(2),a("showErrors",e.showErrors),i(5),c(d(95,94,"panel.title.timing.of.application")),i(3),a("showErrors",e.showErrors)("dataModel",e.ectdModel),i(5),u("",d(103,96,"panel.title.medicinal.ingredients")," "),i(2),a("id",e.helpIndex.medicIngrIndx[2]),i(),a("href","#"+e.helpIndex.medicIngrIndx[1],I),i(2),c(d(108,98,"instruction")),i(2),c(e.helpIndex.medicIngrIndx[0]),i(2),a("showErrors",e.showErrors),i(5),u("",d(117,100,"panel.title.fees")," "),i(2),a("id",e.helpIndex.feePayIndx[2]),i(),a("href","#"+e.helpIndex.feePayIndx[1],I),i(2),c(d(122,102,"instruction")),i(2),c(e.helpIndex.feePayIndx[0]),i(2),a("showErrors",e.showErrors),i(5),u("",d(131,104,"panel.title.certification")," "),i(2),a("id",e.helpIndex.certificationIndx[2]),i(),a("href","#"+e.helpIndex.certificationIndx[1],I),i(2),c(d(136,106,"instruction")),i(2),c(e.helpIndex.certificationIndx[0]),i(2),a("showErrors",e.showErrors),i(4),u(" ",d(144,108,"save.working.copy")," "),i(4),u(" ",d(148,110,"generate.final")," "))},dependencies:[re,ie,oe,ne,de,se,ae,pe,_e,ve,he,ce,ye,D,Se,T,O,B,N,M,k,A,U,V],encapsulation:2})}}return E})();export{vi as FormBaseComponent};
